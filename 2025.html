<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://public.codepenassets.com/css/normalize-5.0.0.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Delicious+Handrawn&display=swap" rel="stylesheet">
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css'><link rel="stylesheet" href="./css/2025.css">
<script src="./js/animate-heart-canvas-browser.js?v=20230222171908"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script><script  src="./js/botonscript_2025.js"></script>
<!-- audio con id -->
<audio id="bgm" src="./mp3/2022.mp3" preload="auto" loop></audio>

<script>
  // flag para recordar si el usuario autorizó música en esta sesión
  const MUSIC_FLAG = 'bgmEnabled';

  function createMusicOverlay() {
    const o = document.createElement('div');
    o.id = 'music-overlay';
    o.style.cssText = `
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,.6); z-index:99999; color:#fff; font-family:system-ui, sans-serif;
      text-align:center; padding:24px;
    `;
    o.innerHTML = `
      <div>
        <h2 style="margin:0 0 12px; font-size:24px;">¿Activar música?</h2>
        <p style="margin:0 0 18px; opacity:.9">Toca el botón para reproducir el tema de fondo.</p>
        <button id="btn-play-bgm" style="
          padding:10px 18px; font-size:16px; border:0; border-radius:10px; cursor:pointer;
        ">Reproducir</button>
      </div>
    `;
    document.body.appendChild(o);
    document.getElementById('btn-play-bgm').addEventListener('click', async () => {
      const audio = document.getElementById('bgm');
      try {
        await audio.play();
        sessionStorage.setItem(MUSIC_FLAG, '1');
        o.remove();
      } catch (e) {
        alert('No se pudo iniciar el audio. Intenta otra vez.');
        console.error(e);
      }
    });
  }

  async function tryStartBgmOnLoad() {
    const audio = document.getElementById('bgm');
    if (!audio) return;

    // Si en esta sesión ya autorizó, intentamos reproducir de inmediato
    const userEnabled = sessionStorage.getItem(MUSIC_FLAG) === '1';

    try {
      if (userEnabled) {
        await audio.play(); // puede funcionar si el navegador “recuerda” interacción reciente
      } else {
        // Primer intento "silencioso"
        await audio.play();
        sessionStorage.setItem(MUSIC_FLAG, '1');
      }
    } catch (err) {
      // Bloqueado: mostramos overlay para que el usuario haga click
      createMusicOverlay();
    }
  }

  // Reintenta al volver a la pestaña si el usuario ya habilitó
  document.addEventListener('visibilitychange', async () => {
    const audio = document.getElementById('bgm');
    if (!audio) return;
    if (document.visibilityState === 'visible' &&
        sessionStorage.getItem(MUSIC_FLAG) === '1' &&
        audio.paused) {
      try { await audio.play(); } catch (e) {}
    }
  });

  // Dispara al cargar DOM
  document.addEventListener('DOMContentLoaded', tryStartBgmOnLoad);
</script>
<script>
   let queryData = getSearchData()
   console.log(queryData)
   let animateHeartCanvas = new AnimateHeartCanvas(
       Number(queryData.hMin),
       Number(queryData.hMax),
       Number(queryData.countHeart),
       Number(queryData.sizeMin),
       Number(queryData.sizeMax),
       queryData.bgColor,
   )
   function getSearchData(){
       let searchString = location.search;
       if (searchString){
           let obj = {};
           searchString = searchString.substring(1, searchString.length);
           let tempArray = searchString.split('&');
           tempArray.forEach(item => {
               obj[item.split('=')[0]] = decodeURIComponent(item.split('=')[1]);
           });
           return obj;
       } else {
           return false;
       }
   }
</script>
</head>
<body>
   
<!-- partial:index.partial.html -->
<div class="header" id="top">
   <h1>2025 Contigo<br>❤️</h1>
   <i class="fa fa-angle-down animated bounce"></i>
</div>

<div class="section">
   <div class="middle">
      <img src="https://i.imgur.com/4XG1JZa.png"referrerpolicy="no-referrer"/>
   </div>
   <div class="right title">
      <div class="content">
         <h2>Aprendizajes del amor</h2>
         <p>Todo este tiempo juntos ha sido una escuela hermosa. Hemos aprendido de la
             vida, de los momentos difíciles y de los más felices. Cada sonrisa tuya me
              enseña que el amor no es solo emoción, sino también paciencia, apoyo, 
              ternura, y sobre todo, un compromiso que se renueva cada día. Gracias a 
              ti he comprendido que amar es construir, cuidar y confiar, incluso cuando
               el camino se vuelve incierto.</p>
      </div>
   </div>
   

<div class="section">
   <div class="middle">
      <img src="https://i.imgur.com/4XG1JZa.png"referrerpolicy="no-referrer" />
   </div>
   <div class="left title">
      <div class="content">
         <h2>Un año especial</h2>
         <p>Este año es muy especial para mí, porque más que nunca siento el progreso 
            que hemos logrado juntos. Siento ese futuro brillante que poco a poco se 
            va dibujando frente a nosotros, y me emociona imaginar todo lo que todavía 
            nos espera. Este 2025 no es solo otro año más: es una prueba viva de cuánto 
            hemos crecido, de cuánto nos hemos amado, y de cómo, a pesar de todo, 
            seguimos eligiéndonos una y otra vez.</p>
      </div>
   </div>
   
</div>

<div class="section">
   <div class="middle">
      <img src="https://i.imgur.com/2GUc9on.png"referrerpolicy="no-referrer"/>
   </div>
   <div class="right title">
      <div class="content">
         <h2>Nuestro futuro juntos</h2>
         <p>A veces me detengo a pensar en todo lo que hemos vivido desde aquel primer año
             juntos, y no puedo evitar sonreír. Hemos cambiado, hemos madurado, pero algo 
             nunca ha cambiado: mi deseo de seguir caminando contigo, tomados de la mano, 
             sin importar a dónde nos lleve la vida. Eres mi presente más bonito y mi futuro 
             más deseado. Te amo, hoy más que nunca. Gracias por existir, por quedarte, y por 
             amarme como lo haces. Con todo mi amor, Yo, Leandro.</p>
      </div>
   </div>
   

<div class="section">
   <div class="middle">
      <img src="https://i.imgur.com/2GUc9on.png"referrerpolicy="no-referrer" />
   </div>
   <div class="left title">
      <div class="content">
         <h2>Mi refugio y mi calma</h2>
         <p>Quiero que sepas, mi conita, que te amo con todo lo que soy. Que este año ha 
            sido uno de los más hermosos a tu lado, y que cada recuerdo contigo se queda 
            grabado en mi alma como un tesoro. Gracias por ser mi refugio, mi risa, 
            mi calma, y también mi locura favorita. Eres ese pedacito de paz que encuentro
             incluso en los días más caóticos, y la razón por la que todo tiene sentido.</p>
      </div>
   </div>
   
</div>

<div class="footer">
<div class="button">
   <div class="content">
     <p>Final</p>
   </div>
   <div class="particles">
     <div class="particle square red"></div>
     <div class="particle circle green"></div>
     <div class="particle square yellow"></div>
     <div class="particle square red"></div>
     <div class="particle square yellow"></div>
     <div class="particle circle green"></div>
     <div class="particle circle white"></div>
             </div>
         </div>
     </div>

<!-- partial -->
  <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script><script  src="./js/2025.js"></script>

</body>
</html>
